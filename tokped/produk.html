<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RF Tripolar dan Six Polar Radio Frequency - LKTECH | Tokopedia</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <style>
        .tokopedia-green {
            background-color: #27ae60;
        }
        .review-gallery {
            display: flex;
            gap: 8px;
            overflow-x: auto;
        }
        .review-gallery img {
            flex-shrink: 0;
        }
        .variant-option.selected {
            border-color: #27ae60;
            background-color: #f0f9f4;
            color: #27ae60;
        }
        .fullscreen-cart {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }
        .variant-sheet {
            transform: translateY(100%);
            transition: transform 0.3s ease-out;
        }
        .variant-sheet.show {
            transform: translateY(0);
        }
        .placeholder-image {
            background-color: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #aaa;
        }
        .placeholder-text {
            background-color: #f0f0f0;
            height: 1rem;
            border-radius: 0.25rem;
        }
        .notification {
            position: fixed;
            top: 80px;
            right: 20px;
            background-color: #27ae60;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
            transform: translateX(400px);
            transition: transform 0.3s ease-out;
        }
        .notification.show {
            transform: translateX(0);
        }
    </style>
</head>
<body class="bg-gray-100">
    <!-- Header Tokopedia -->
    <div class="fixed top-0 left-0 right-0 bg-white z-50 shadow-sm">
        <div class="flex items-center justify-between p-4">
            <button class="text-gray-700">
                <i class="fas fa-arrow-left text-xl"></i>
            </button>
            <div class="flex gap-4">
                <button class="text-gray-700">
                    <i class="fas fa-share-alt text-xl"></i>
                </button>
                <button class="text-gray-700 relative" onclick="toggleCart()">
                    <i class="fas fa-shopping-cart text-xl"></i>
                    <span id="cartBadge" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center">0</span>
                </button>
                <button class="text-gray-700">
                    <i class="fas fa-ellipsis-v text-xl"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification">
        <i class="fas fa-check-circle"></i>
        <span>Produk berhasil ditambahkan ke keranjang!</span>
    </div>

    <!-- Main Content -->
    <div class="pt-16 pb-40">
        <!-- Product Gallery -->
        <div class="bg-white">
            <div class="relative">
                <div class="relative h-96">
                    <img id="mainImage" src="https://m.media-amazon.com/images/I/61T7IBsVLmL._AC_SL1500_.jpg" alt="RF Tripolar dan Six Polar" class="w-full h-96 object-cover">
                    <div class="absolute bottom-4 right-4 bg-black bg-opacity-50 text-white px-2 py-1 rounded text-sm">
                        <span id="imageCounter">1</span>/5
                    </div>
                    <button class="absolute top-4 right-4 bg-white bg-opacity-80 rounded-full p-2">
                        <i class="far fa-heart text-gray-700"></i>
                    </button>
                </div>
            </div>
            
            <!-- Thumbnail Gallery -->
            <div class="flex gap-2 p-4 overflow-x-auto" id="thumbnailGallery">
                <!-- Thumbnails will be dynamically inserted here -->
            </div>
        </div>

        <!-- Product Info -->
        <div class="bg-white mt-2 p-4">
            <div class="flex items-start justify-between mb-2">
                <div class="flex-1">
                    <h1 id="productName" class="text-lg font-semibold text-gray-900 mb-2">3-in-1 facial radio frequency skin lifting machine - 3 Polar</h1>
                    <div class="flex items-center gap-2 mb-3">
                        <div class="flex items-center">
                            <i class="fas fa-star text-yellow-400 text-sm"></i>
                            <span class="text-sm ml-1">4.9</span>
                        </div>
                        <span class="text-gray-400 text-sm">|</span>
                        <span class="text-sm text-gray-600">1.2rb terjual</span>
                        <span class="text-gray-400 text-sm">|</span>
                        <span class="text-sm text-gray-600">1.5rb ulasan</span>
                        <span class="text-gray-400 text-sm">|</span>
                        <span class="text-sm text-gray-600">Bogor</span>
                    </div>
                </div>
                <button class="text-gray-400 hover:text-red-500 transition-colors">
                    <i class="far fa-heart text-2xl"></i>
                </button>
            </div>
            
            <div class="flex items-baseline gap-2 mb-4">
                <span id="salePrice" class="text-2xl font-bold text-red-500">Rp1.915.376</span>
                <span id="originalPrice" class="text-sm text-gray-500 line-through">Rp3.192.294</span>
                <span id="discount" class="bg-red-100 text-red-600 text-xs px-2 py-1 rounded">60%</span>
            </div>

            <!-- Promo Info -->
            <div class="space-y-2 mb-4">
                <div class="bg-green-50 border border-green-200 rounded-lg p-3">
                    <div class="flex items-center gap-2 text-green-700 text-sm">
                        <i class="fas fa-tag"></i>
                        <span class="font-medium">Cashback 10% hingga Rp50.000</span>
                    </div>
                </div>
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-3">
                    <div class="flex items-center gap-2 text-blue-700 text-sm">
                        <i class="fas fa-truck"></i>
                        <span class="font-medium">Gratis Ongkir</span>
                    </div>
                </div>
            </div>

            <!-- Variant Selection -->
            <div class="border-t pt-4">
                <h3 class="text-sm font-medium mb-2">Pilih Varian:</h3>
                <div class="space-y-3">
                    <div>
                        <p class="text-xs text-gray-600 mb-2">Tipe</p>
                        <div class="flex gap-2">
                            <button class="variant-option px-4 py-2 border rounded-lg text-sm selected" onclick="selectVariant(this, '3 Polar')">
                                3 Polar
                            </button>
                            <button class="variant-option px-4 py-2 border rounded-lg text-sm" onclick="selectVariant(this, '6 Polar')">
                                6 Polar
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quantity -->
            <div class="border-t pt-4 mt-4">
                <div class="flex items-center justify-between">
                    <span class="text-sm font-medium">Jumlah</span>
                    <div class="flex items-center gap-3">
                        <button class="w-8 h-8 rounded-full border flex items-center justify-center" onclick="updateQuantity(-1)">
                            <i class="fas fa-minus text-xs"></i>
                        </button>
                        <span class="font-medium" id="quantity">1</span>
                        <button class="w-8 h-8 rounded-full border flex items-center justify-center" onclick="updateQuantity(1)">
                            <i class="fas fa-plus text-xs"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Product Video -->
        <div class="bg-white mt-2 p-4">
            <h3 class="font-medium text-sm mb-3">Video Produk</h3>
            <div class="relative">
                <video id="productVideo" class="w-full rounded-lg" controls poster="https://m.media-amazon.com/images/I/61T7IBsVLmL._AC_SL1500_.jpg">
                    <source src="https://down-zl-sg.vod.susercontent.com/api/v4/11110107/mms/sg_02ab6747-87d5-4164-88d3-252f82e02efd_000050.16000081705298959.mp4" type="video/mp4">
                    Browser Anda tidak mendukung tag video.
                </video>
            </div>
        </div>

        <!-- Seller Info -->
        <div class="bg-white mt-2 p-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <img src="https://picsum.photos/seed/lktech/50/50.jpg" alt="Seller" class="w-12 h-12 rounded-full">
                    <div>
                        <h3 class="font-medium text-sm">LKTECH</h3>
                        <div class="flex items-center gap-1">
                            <i class="fas fa-star text-yellow-400 text-xs"></i>
                            <span class="text-xs text-gray-600">4.8</span>
                            <span class="text-xs text-gray-400">| Aktif 1 jam lalu</span>
                        </div>
                        <div class="flex items-center gap-2 mt-1">
                            <span class="bg-green-100 text-green-700 text-xs px-2 py-0.5 rounded">Power Merchant</span>
                            <span class="bg-blue-100 text-blue-700 text-xs px-2 py-0.5 rounded">Official Store</span>
                        </div>
                    </div>
                </div>
                <button class="text-green-600 text-sm font-medium">
                    <i class="fas fa-store mr-1"></i>
                    Kunjungi Toko
                </button>
            </div>
        </div>

        <!-- Deskripsi Section -->
        <div class="bg-white mt-2 p-4 section-content">
            <h3 class="font-medium text-sm mb-3">Deskripsi Produk</h3>
            <div class="prose prose-sm max-w-none">
                <p id="productDescription" class="text-gray-700 mb-3">
                    Versi 3 Polar cocok untuk area wajah kecil seperti pipi, dagu, dan bawah mata. Menghasilkan panas lembut untuk merangsang produksi kolagen alami, mengencangkan kulit, serta mengurangi garis halus.
                </p>
                <p class="text-gray-700 mb-3">
                    <strong>Fitur Utama:</strong>
                </p>
                <ul class="list-disc list-inside text-gray-700 space-y-1 mb-3">
                    <li>2 mode: 3 Polar untuk area kecil, 6 Polar untuk area besar</li>
                    <li>Layar LCD untuk pengaturan mudah</li>
                    <li>5 tingkat intensitas yang dapat disesuaikan</li>
                    <li>Timer otomatis untuk keamanan</li>
                    <li>Desain ergonomis dan mudah digunakan</li>
                </ul>
                <p class="text-gray-700">
                    Alat ini aman digunakan di rumah dengan hasil yang terbukti efektif. Dapatkan kulit yang lebih kencang dan sehat hanya dengan pemakaian rutin 15-20 menit setiap hari.
                </p>
            </div>
        </div>

        <!-- Spesifikasi Section -->
        <div class="bg-white mt-2 p-4 section-content">
            <h3 class="font-medium text-sm mb-3">Spesifikasi Produk</h3>
            <div class="space-y-4">
                <!-- Informasi Umum -->
                <div>
                    <h4 class="font-medium text-sm mb-3 text-gray-900">Informasi Umum</h4>
                    <div class="bg-gray-50 rounded-lg p-4 space-y-3">
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-600">Merek</span>
                            <span class="text-sm text-gray-900 font-medium">LKTECH</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-600">Model</span>
                            <span class="text-sm text-gray-900 font-medium">RF-3000</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-600">Kategori</span>
                            <span class="text-sm text-gray-900 font-medium">Alat Kecantikan</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-600">Garansi</span>
                            <span class="text-sm text-gray-900 font-medium">1 Tahun</span>
                        </div>
                    </div>
                </div>

                <!-- Teknis -->
                <div>
                    <h4 class="font-medium text-sm mb-3 text-gray-900">Spesifikasi Teknis</h4>
                    <div class="bg-gray-50 rounded-lg p-4 space-y-3">
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-600">Tipe</span>
                            <span class="text-sm text-gray-900 font-medium">RF Tripolar & Six Polar</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-600">Daya</span>
                            <span class="text-sm text-gray-900 font-medium">50W</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-600">Voltase</span>
                            <span class="text-sm text-gray-900 font-medium">220V</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-600">Frekuensi</span>
                            <span class="text-sm text-gray-900 font-medium">5MHz</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-600">Tingkat Intensitas</span>
                            <span class="text-sm text-gray-900 font-medium">5 Level</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-600">Timer</span>
                            <span class="text-sm text-gray-900 font-medium">0-30 menit</span>
                        </div>
                    </div>
                </div>

                <!-- Fisik -->
                <div>
                    <h4 class="font-medium text-sm mb-3 text-gray-900">Dimensi & Berat</h4>
                    <div class="bg-gray-50 rounded-lg p-4 space-y-3">
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-600">Berat</span>
                            <span class="text-sm text-gray-900 font-medium">1.5 kg</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-600">Dimensi</span>
                            <span class="text-sm text-gray-900 font-medium">25 x 15 x 10 cm</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-sm text-gray-600">Material</span>
                            <span class="text-sm text-gray-900 font-medium">ABS Plastic</span>
                        </div>
                    </div>
                </div>

                <!-- Kelengkapan -->
                <div>
                    <h4 class="font-medium text-sm mb-3 text-gray-900">Kelengkapan Paket</h4>
                    <div class="bg-gray-50 rounded-lg p-4">
                        <ul class="space-y-2 text-sm text-gray-700">
                            <li class="flex items-start gap-2">
                                <i class="fas fa-check text-green-500 mt-0.5"></i>
                                <span>1 Unit RF Machine</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <i class="fas fa-check text-green-500 mt-0.5"></i>
                                <span>1 Kabel Power</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <i class="fas fa-check text-green-500 mt-0.5"></i>
                                <span>1 Manual Book</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <i class="fas fa-check text-green-500 mt-0.5"></i>
                                <span>1 Warranty Card</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <i class="fas fa-check text-green-500 mt-0.5"></i>
                                <span>1 Box Packaging</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ulasan Section -->
        <div class="bg-white mt-2 p-4 section-content">
            <h3 class="font-medium text-sm mb-3">Ulasan Pembeli</h3>
            <div class="flex items-center gap-4 mb-4">
                <div class="text-center">
                    <div class="text-3xl font-bold">4.9</div>
                    <div class="flex text-yellow-400 text-sm justify-center">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="text-xs text-gray-600">1.5rb ulasan</div>
                </div>
                <div class="flex-1 space-y-1">
                    <div class="flex items-center gap-2 text-xs">
                        <span>5</span>
                        <div class="flex-1 bg-gray-200 rounded-full h-2">
                            <div class="bg-green-500 h-2 rounded-full" style="width: 85%"></div>
                        </div>
                        <span>85%</span>
                    </div>
                    <div class="flex items-center gap-2 text-xs">
                        <span>4</span>
                        <div class="flex-1 bg-gray-200 rounded-full h-2">
                            <div class="bg-green-500 h-2 rounded-full" style="width: 10%"></div>
                        </div>
                        <span>10%</span>
                    </div>
                    <div class="flex items-center gap-2 text-xs">
                        <span>3</span>
                        <div class="flex-1 bg-gray-200 rounded-full h-2">
                            <div class="bg-green-500 h-2 rounded-full" style="width: 3%"></div>
                        </div>
                        <span>3%</span>
                    </div>
                    <div class="flex items-center gap-2 text-xs">
                        <span>2</span>
                        <div class="flex-1 bg-gray-200 rounded-full h-2">
                            <div class="bg-green-500 h-2 rounded-full" style="width: 1%"></div>
                        </div>
                        <span>1%</span>
                    </div>
                    <div class="flex items-center gap-2 text-xs">
                        <span>1</span>
                        <div class="flex-1 bg-gray-200 rounded-full h-2">
                            <div class="bg-green-500 h-2 rounded-full" style="width: 1%"></div>
                        </div>
                        <span>1%</span>
                    </div>
                </div>
            </div>

            <!-- Filter and Sort -->
            <div class="flex gap-2 mb-4 overflow-x-auto">
                <select class="px-3 py-1 bg-gray-100 rounded-lg text-xs whitespace-nowrap">
                    <option>Semua</option>
                    <option>Dengan Foto</option>
                    <option>Dengan Video</option>
                </select>
                <select class="px-3 py-1 bg-gray-100 rounded-lg text-xs whitespace-nowrap">
                    <option>Terbaru</option>
                    <option>Terbantu</option>
                    <option>Rating Tertinggi</option>
                    <option>Rating Terendah</option>
                </select>
                <button class="px-3 py-1 bg-gray-100 rounded-lg text-xs whitespace-nowrap">
                    5 Bintang
                </button>
                <button class="px-3 py-1 bg-gray-100 rounded-lg text-xs whitespace-nowrap">
                    4 Bintang
                </button>
                <button class="px-3 py-1 bg-gray-100 rounded-lg text-xs whitespace-nowrap">
                    3 Bintang
                </button>
            </div>

            <!-- Review Items -->
            <div class="space-y-4">
                <!-- Review 1 -->
                <div class="border-b pb-4">
                    <div class="flex items-start gap-3">
                        <img src="https://picsum.photos/seed/user1/40/40.jpg" alt="User" class="w-10 h-10 rounded-full">
                        <div class="flex-1">
                            <div class="flex items-center justify-between mb-1">
                                <h4 class="font-medium text-sm">Sarah Putri</h4>
                                <span class="text-xs text-gray-500">2 hari lalu</span>
                            </div>
                            <div class="flex items-center gap-2 mb-2">
                                <div class="flex text-yellow-400 text-xs">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                                <span class="text-xs text-gray-600">Varian: 3 Polar</span>
                            </div>
                            <p class="text-sm text-gray-700 mb-2">
                                Produk sangat bagus! Hasilnya terlihat setelah 2 minggu pemakaian. Kulit wajah terasa lebih kencang dan cerah. Seller juga ramah dan fast response. Packaging rapi dan aman. Recommended banget!
                            </p>
                            <div class="review-gallery">
                                <img src="https://picsum.photos/seed/review1a/100/100.jpg" alt="Review" class="w-20 h-20 object-cover rounded">
                                <img src="https://picsum.photos/seed/review1b/100/100.jpg" alt="Review" class="w-20 h-20 object-cover rounded">
                                <img src="https://picsum.photos/seed/review1c/100/100.jpg" alt="Review" class="w-20 h-20 object-cover rounded">
                            </div>
                            <div class="flex items-center gap-4 text-xs text-gray-500 mt-2">
                                <button class="hover:text-green-600 flex items-center gap-1">
                                    <i class="fas fa-thumbs-up"></i>
                                    Membantu (23)
                                </button>
                                <button class="hover:text-blue-600 flex items-center gap-1">
                                    <i class="fas fa-comment"></i>
                                    Balas
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Review 2 -->
                <div class="border-b pb-4">
                    <div class="flex items-start gap-3">
                        <img src="https://picsum.photos/seed/user2/40/40.jpg" alt="User" class="w-10 h-10 rounded-full">
                        <div class="flex-1">
                            <div class="flex items-center justify-between mb-1">
                                <h4 class="font-medium text-sm">Maya Sari</h4>
                                <span class="text-xs text-gray-500">1 minggu lalu</span>
                            </div>
                            <div class="flex items-center gap-2 mb-2">
                                <div class="flex text-yellow-400 text-xs">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="far fa-star"></i>
                                </div>
                                <span class="text-xs text-gray-600">Varian: 6 Polar</span>
                            </div>
                            <p class="text-sm text-gray-700 mb-2">
                                Alat mudah digunakan, pengiriman cepat. Hanya saja butuh waktu untuk melihat hasil yang signifikan. Overall puas dengan pembelian ini. Mungkin akan beli lagi untuk hadiah.
                            </p>
                            <div class="flex items-center gap-4 text-xs text-gray-500 mt-2">
                                <button class="hover:text-green-600 flex items-center gap-1">
                                    <i class="fas fa-thumbs-up"></i>
                                    Membantu (15)
                                </button>
                                <button class="hover:text-blue-600 flex items-center gap-1">
                                    <i class="fas fa-comment"></i>
                                    Balas
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Review 3 -->
                <div class="border-b pb-4">
                    <div class="flex items-start gap-3">
                        <img src="https://picsum.photos/seed/user3/40/40.jpg" alt="User" class="w-10 h-10 rounded-full">
                        <div class="flex-1">
                            <div class="flex items-center justify-between mb-1">
                                <h4 class="font-medium text-sm">Budi Santoso</h4>
                                <span class="text-xs text-gray-500">3 hari lalu</span>
                            </div>
                            <div class="flex items-center gap-2 mb-2">
                                <div class="flex text-yellow-400 text-xs">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                                <span class="text-xs text-gray-600">Varian: 3 Polar</span>
                            </div>
                            <p class="text-sm text-gray-700 mb-2">
                                Mantap banget! Setelah 1 bulan pemakaian, wajahku terlihat lebih muda 5 tahun. Keriput di sudut mata dan dahi berkurang signifikan. Worth every penny!
                            </p>
                            <div class="bg-blue-50 border border-blue-200 rounded-lg p-2 mb-2">
                                <div class="flex items-center gap-2 text-blue-700 text-xs">
                                    <i class="fas fa-tag"></i>
                                    <span>Pembelian verified • Bonus cashback Rp50.000</span>
                                </div>
                            </div>
                            <div class="flex items-center gap-4 text-xs text-gray-500 mt-2">
                                <button class="hover:text-green-600 flex items-center gap-1">
                                    <i class="fas fa-thumbs-up"></i>
                                    Membantu (45)
                                </button>
                                <button class="hover:text-blue-600 flex items-center gap-1">
                                    <i class="fas fa-comment"></i>
                                    Balas
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Load More -->
            <div class="text-center mt-4">
                <button class="text-green-600 text-sm font-medium">
                    Muat Lebih Banyak
                </button>
            </div>
        </div>

        <!-- Diskusi Section -->
        <div class="bg-white mt-2 p-4 section-content">
            <h3 class="font-medium text-sm mb-3">Diskusi Produk</h3>
            <!-- Discussion Stats -->
            <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-4">
                <div class="flex items-center justify-between">
                    <div>
                        <div class="text-sm font-medium text-green-800">Diskusi Produk</div>
                        <div class="text-xs text-green-600">23 diskusi • 89% terjawab</div>
                    </div>
                    <button onclick="showDiscussionForm()" class="bg-green-600 text-white px-4 py-2 rounded-lg text-sm">
                        <i class="fas fa-plus mr-1"></i>
                        Buat Diskusi
                    </button>
                </div>
            </div>

            <!-- Discussion Form (Hidden by default) -->
            <div id="discussionForm" class="hidden mb-4 bg-gray-50 rounded-lg p-4">
                <h4 class="font-medium text-sm mb-3">Ajukan Pertanyaan</h4>
                <textarea class="w-full p-3 border rounded-lg text-sm resize-none" rows="3" placeholder="Tanyakan tentang produk ini..."></textarea>
                <div class="flex gap-2 mt-3">
                    <button onclick="hideDiscussionForm()" class="flex-1 bg-gray-200 text-gray-700 py-2 rounded-lg text-sm">
                        Batal
                    </button>
                    <button onclick="submitDiscussion()" class="flex-1 bg-green-600 text-white py-2 rounded-lg text-sm">
                        Kirim
                    </button>
                </div>
            </div>

            <!-- Filter Discussions -->
            <div class="flex gap-2 mb-4 overflow-x-auto">
                <button class="px-3 py-1 bg-green-100 text-green-700 rounded-lg text-xs whitespace-nowrap">
                    Semua
                </button>
                <button class="px-3 py-1 bg-gray-100 text-gray-700 rounded-lg text-xs whitespace-nowrap">
                    Belum Dijawab
                </button>
                <button class="px-3 py-1 bg-gray-100 text-gray-700 rounded-lg text-xs whitespace-nowrap">
                    Terpopuler
                </button>
                <button class="px-3 py-1 bg-gray-100 text-gray-700 rounded-lg text-xs whitespace-nowrap">
                    Terbaru
                </button>
            </div>

            <!-- Discussion Items -->
            <div class="space-y-4">
                <!-- Discussion 1 -->
                <div class="discussion-item border rounded-lg p-4">
                    <div class="flex items-start gap-3">
                        <img src="https://picsum.photos/seed/disc1/40/40.jpg" alt="User" class="w-10 h-10 rounded-full">
                        <div class="flex-1">
                            <div class="flex items-center justify-between mb-1">
                                <h4 class="font-medium text-sm">Rina Wijaya</h4>
                                <span class="text-xs text-gray-500">5 jam lalu</span>
                            </div>
                            <p class="text-sm text-gray-700 mb-2">
                                Apakah alat ini aman untuk kulit sensitif? Saya punya kulit wajah yang mudah iritasi.
                            </p>
                            <div class="flex items-center gap-4 text-xs">
                                <button class="text-gray-500 hover:text-green-600">
                                    <i class="fas fa-thumbs-up mr-1"></i>
                                    12
                                </button>
                                <button class="text-gray-500 hover:text-blue-600">
                                    <i class="fas fa-comment mr-1"></i>
                                    Balas
                                </button>
                                <span class="text-green-600">
                                    <i class="fas fa-check-circle mr-1"></i>
                                    Terjawab Penjual
                                </span>
                            </div>
                            
                            <!-- Seller Reply -->
                            <div class="mt-3 ml-2 pl-4 border-l-2 border-green-200">
                                <div class="flex items-center gap-2 mb-1">
                                    <img src="https://picsum.photos/seed/lktech/30/30.jpg" alt="Seller" class="w-6 h-6 rounded-full">
                                    <span class="text-xs font-medium text-green-600">LKTECH</span>
                                    <span class="text-xs text-gray-500">• 4 jam lalu</span>
                                </div>
                                <p class="text-sm text-gray-700">
                                    Halo Kak Rina, alat ini aman untuk kulit sensitif karena dilengkapi dengan 5 tingkat intensitas yang bisa disesuaikan. Untuk pemula disarankan mulai dari level 1-2 dulu. Jangan lupa gunakan serum sebelum pemakaian untuk hasil maksimal ya.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Discussion 2 -->
                <div class="discussion-item border rounded-lg p-4">
                    <div class="flex items-start gap-3">
                        <img src="https://picsum.photos/seed/disc2/40/40.jpg" alt="User" class="w-10 h-10 rounded-full">
                        <div class="flex-1">
                            <div class="flex items-center justify-between mb-1">
                                <h4 class="font-medium text-sm">Andi Pratama</h4>
                                <span class="text-xs text-gray-500">1 hari lalu</span>
                            </div>
                            <p class="text-sm text-gray-700 mb-2">
                                Bedanya 3 Polar dan 6 Polar apa ya? Mana yang lebih cocok untuk pemula?
                            </p>
                            <div class="flex items-center gap-4 text-xs">
                                <button class="text-gray-500 hover:text-green-600">
                                    <i class="fas fa-thumbs-up mr-1"></i>
                                    8
                                </button>
                                <button class="text-gray-500 hover:text-blue-600">
                                    <i class="fas fa-comment mr-1"></i>
                                    Balas
                                </button>
                            </div>
                            
                            <!-- User Reply -->
                            <div class="mt-3 ml-2 pl-4 border-l-2 border-gray-200">
                                <div class="flex items-center gap-2 mb-1">
                                    <img src="https://picsum.photos/seed/user4/30/30.jpg" alt="User" class="w-6 h-6 rounded-full">
                                    <span class="text-xs font-medium">Siti Nurhaliza</span>
                                    <span class="text-xs text-gray-500">• 12 jam lalu</span>
                                </div>
                                <p class="text-sm text-gray-700">
                                    Menurutku 3 Polar lebih cocok untuk pemula karena fokusnya lebih ke area kecil. 6 Polar itu untuk area yang lebih luas seperti pipi dan leher. Saya pake 3 Polar dan hasilnya bagus kok.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Discussion 3 -->
                <div class="discussion-item border rounded-lg p-4">
                    <div class="flex items-start gap-3">
                        <img src="https://picsum.photos/seed/disc3/40/40.jpg" alt="User" class="w-10 h-10 rounded-full">
                        <div class="flex-1">
                            <div class="flex items-center justify-between mb-1">
                                <h4 class="font-medium text-sm">Dewi Lestari</h4>
                                <span class="text-xs text-gray-500">2 hari lalu</span>
                            </div>
                            <p class="text-sm text-gray-700 mb-2">
                                Berapa lama biasanya hasilnya mulai terlihat? Dan berapa kali sehari pemakaiannya?
                            </p>
                            <div class="flex items-center gap-4 text-xs">
                                <button class="text-gray-500 hover:text-green-600">
                                    <i class="fas fa-thumbs-up mr-1"></i>
                                    15
                                </button>
                                <button class="text-gray-500 hover:text-blue-600">
                                    <i class="fas fa-comment mr-1"></i>
                                    Balas
                                </button>
                                <span class="text-orange-600">
                                    <i class="fas fa-clock mr-1"></i>
                                    Menunggu Jawaban
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Load More Discussions -->
            <div class="text-center mt-4">
                <button class="text-green-600 text-sm font-medium">
                    Lihat Diskusi Lainnya
                </button>
            </div>
        </div>

        <!-- Related Products -->
        <div class="bg-white mt-2 p-4">
            <h3 class="font-medium text-sm mb-3">Produk Terkait</h3>
            <div class="flex gap-3 overflow-x-auto">
                <div class="flex-shrink-0 w-32">
                    <img src="https://m.media-amazon.com/images/I/61w4K4EneHL._AC_SL1500_.jpg" alt="RF Beauty Device Pro" class="w-full h-32 object-cover rounded-lg mb-2">
                    <p class="text-xs text-gray-900 line-clamp-2">RF Beauty Device Pro</p>
                    <div class="flex items-center gap-1 mb-1">
                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                        <span class="text-xs text-gray-600">4.7</span>
                    </div>
                    <p class="text-sm font-bold text-red-500">Rp1.850.000</p>
                </div>
                <div class="flex-shrink-0 w-32">
                    <img src="https://m.media-amazon.com/images/I/61I9kobouRL._AC_SL1500_.jpg" alt="Face Lifting Machine" class="w-full h-32 object-cover rounded-lg mb-2">
                    <p class="text-xs text-gray-900 line-clamp-2">Face Lifting Machine</p>
                    <div class="flex items-center gap-1 mb-1">
                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                        <span class="text-xs text-gray-600">4.8</span>
                    </div>
                    <p class="text-sm font-bold text-red-500">Rp2.100.000</p>
                </div>
                <div class="flex-shrink-0 w-32">
                    <img src="https://m.media-amazon.com/images/I/61-oqTr76jL._AC_SL1500_.jpg" alt="Skin Tightening Device" class="w-full h-32 object-cover rounded-lg mb-2">
                    <p class="text-xs text-gray-900 line-clamp-2">Skin Tightening Device</p>
                    <div class="flex items-center gap-1 mb-1">
                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                        <span class="text-xs text-gray-600">4.9</span>
                    </div>
                    <p class="text-sm font-bold text-red-500">Rp3.200.000</p>
                </div>
                <div class="flex-shrink-0 w-32">
                    <img src="https://m.media-amazon.com/images/I/61T7IBsVLmL._AC_SL1500_.jpg" alt="Anti Aging Device" class="w-full h-32 object-cover rounded-lg mb-2">
                    <p class="text-xs text-gray-900 line-clamp-2">Anti Aging Device</p>
                    <div class="flex items-center gap-1 mb-1">
                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                        <span class="text-xs text-gray-600">4.6</span>
                    </div>
                    <p class="text-sm font-bold text-red-500">Rp2.750.000</p>
                </div>
            </div>
        </div>

        <!-- Lainnya dari Toko -->
        <div class="bg-white mt-2 p-4">
            <div class="flex items-center justify-between mb-3">
                <h3 class="font-medium text-sm">Lainnya di toko ini</h3>
                <button class="text-green-600 text-sm">Lihat Semua</button>
            </div>
            <div class="grid grid-cols-2 gap-3">
                <div>
                    <img src="https://m.media-amazon.com/images/I/71oGa8IDcKL._AC_SL1500_.jpg" alt="Microdermabrasion Machine" class="w-full h-32 object-cover rounded-lg mb-2">
                    <p class="text-xs text-gray-900 line-clamp-2">Microdermabrasion Machine</p>
                    <div class="flex items-center gap-1 mb-1">
                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                        <span class="text-xs text-gray-600">4.8</span>
                        <span class="text-xs text-gray-400">| 50+ terjual</span>
                    </div>
                    <p class="text-sm font-bold text-red-500">Rp1.950.000</p>
                </div>
                <div>
                    <img src="https://m.media-amazon.com/images/I/716pnSGRIML._AC_SL1500_.jpg" alt="LED Light Therapy Mask" class="w-full h-32 object-cover rounded-lg mb-2">
                    <p class="text-xs text-gray-900 line-clamp-2">LED Light Therapy Mask</p>
                    <div class="flex items-center gap-1 mb-1">
                        <i class="fas fa-star text-yellow-400 text-xs"></i>
                        <span class="text-xs text-gray-600">4.9</span>
                        <span class="text-xs text-gray-400">| 100+ terjual</span>
                    </div>
                    <p class="text-sm font-bold text-red-500">Rp2.350.000</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Full Screen Cart Section (Hidden by default) -->
    <div id="cartSection" class="fixed inset-0 z-50 hidden">
        <!-- Cart Content Full Screen -->
        <div class="fullscreen-cart absolute inset-0 bg-white">
            <!-- Cart Header -->
            <div class="bg-white border-b px-4 py-3 flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <button onclick="toggleCart()" class="text-gray-700">
                        <i class="fas fa-arrow-left text-xl"></i>
                    </button>
                    <h3 class="text-lg font-semibold">Keranjang Saya</h3>
                </div>
                <button onclick="clearCart()" class="text-green-600 text-sm font-medium">
                    Hapus Semua
                </button>
            </div>
            
            <!-- Shipping Address -->
            <div class="bg-green-50 px-4 py-3 border-b">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <i class="fas fa-map-marker-alt text-green-600"></i>
                        <div>
                            <div class="text-sm font-medium">Dikirim ke</div>
                            <div class="text-xs text-gray-600">Rumah - John Doe</div>
                        </div>
                    </div>
                    <button class="text-green-600 text-sm">Ubah</button>
                </div>
            </div>
            
            <!-- Cart Items -->
            <div class="overflow-y-auto" style="height: calc(100vh - 280px);">
                <div id="cartItemsContainer">
                    <!-- Cart items will be dynamically inserted here -->
                </div>
                
                <!-- Voucher Section -->
                <div class="p-4 border-b">
                    <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center gap-2">
                            <i class="fas fa-ticket-alt text-orange-500"></i>
                            <span class="text-sm font-medium">Gunakan Voucher</span>
                        </div>
                        <i class="fas fa-chevron-right text-gray-400 text-sm"></i>
                    </div>
                    <div class="bg-orange-50 border border-orange-200 rounded-lg p-3">
                        <div class="flex items-center justify-between">
                            <div>
                                <div class="text-sm font-medium text-orange-700">DISKON50RB</div>
                                <div class="text-xs text-gray-600">Min. belanja Rp100.000</div>
                            </div>
                            <button class="text-orange-600 text-sm">Pakai</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Cart Summary Fixed Bottom -->
            <div class="absolute bottom-0 left-0 right-0 bg-white border-t">
                <div class="p-4 space-y-2">
                    <div class="flex justify-between text-sm">
                        <span class="text-gray-600">Subtotal (<span id="cartItemCount">0</span> barang)</span>
                        <span id="cartSubtotal">Rp0</span>
                    </div>
                    <div class="flex justify-between text-sm">
                        <span class="text-gray-600">Diskon</span>
                        <span class="text-green-600" id="cartDiscount">-Rp0</span>
                    </div>
                    <div class="flex justify-between font-semibold text-base border-t pt-2">
                        <span>Total</span>
                        <span class="text-red-500" id="cartTotal">Rp0</span>
                    </div>
                </div>
                
                <!-- Checkout Button -->
                <div class="p-4 bg-white border-t">
                    <button onclick="checkout()" class="w-full tokopedia-green text-white py-3 rounded-lg font-medium text-lg">
                        Checkout (<span id="checkoutItemCount">0</span>)
                    </button>
                    <button onclick="toggleCart()" class="w-full mt-3 text-green-600 text-sm">
                        + Tambah Barang Lainnya
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Variant Bottom Sheet (Hidden by default) -->
    <div id="variantSheet" class="fixed inset-0 z-50 hidden">
        <!-- Backdrop -->
        <div class="absolute inset-0 bg-black bg-opacity-50" onclick="closeVariantSheet()"></div>
        
        <!-- Variant Sheet Content -->
        <div class="variant-sheet absolute bottom-0 left-0 right-0 bg-white rounded-t-2xl max-h-[90vh] overflow-hidden">
            <!-- Variant Header -->
            <div class="flex items-center justify-between p-4 border-b">
                <div class="flex items-center gap-3">
                    <button onclick="closeVariantSheet()" class="text-gray-700">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                    <h3 class="text-lg font-semibold">Pilih Varian</h3>
                </div>
            </div>
            
            <!-- Product Info -->
            <div class="flex gap-3 p-4 border-b">
                <img id="variantImage" src="https://m.media-amazon.com/images/I/61T7IBsVLmL._AC_SL1500_.jpg" alt="RF Tripolar" class="w-20 h-20 object-cover rounded">
                <div class="flex-1">
                    <div id="variantName" class="text-sm font-medium mb-1">3-in-1 facial radio frequency skin lifting machine - 3 Polar</div>
                    <div class="flex items-baseline gap-2">
                        <div id="variantPrice" class="text-xl font-bold text-red-500">Rp1.915.376</div>
                        <div id="variantOriginalPrice" class="text-sm text-gray-500 line-through">Rp3.192.294</div>
                        <span id="variantDiscount" class="bg-red-100 text-red-600 text-xs px-2 py-1 rounded">60%</span>
                    </div>
                </div>
            </div>
            
            <!-- Variant Options -->
            <div class="p-4 overflow-y-auto" style="max-height: calc(90vh - 280px);">
                <!-- Tipe Variant -->
                <div class="mb-6">
                    <h4 class="text-sm font-medium mb-3">Tipe</h4>
                    <div class="space-y-2">
                        <button class="variant-option w-full p-3 border rounded-lg text-left flex items-center justify-between selected" onclick="selectVariant(this, '3 Polar')">
                            <span>3 Polar</span>
                            <i class="fas fa-check text-green-600"></i>
                        </button>
                        <button class="variant-option w-full p-3 border rounded-lg text-left flex items-center justify-between" onclick="selectVariant(this, '6 Polar')">
                            <span>6 Polar</span>
                        </button>
                    </div>
                </div>
                
                <!-- Quantity -->
                <div class="mb-6">
                    <h4 class="text-sm font-medium mb-3">Jumlah</h4>
                    <div class="flex items-center justify-between p-3 border rounded-lg">
                        <span class="text-sm">Jumlah</span>
                        <div class="flex items-center gap-3">
                            <button class="w-8 h-8 rounded-full border flex items-center justify-center" onclick="updateVariantQuantity(-1)">
                                <i class="fas fa-minus text-xs"></i>
                            </button>
                            <span class="font-medium" id="variantQuantity">1</span>
                            <button class="w-8 h-8 rounded-full border flex items-center justify-center" onclick="updateVariantQuantity(1)">
                                <i class="fas fa-plus text-xs"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Stock Info -->
                <div class="bg-green-50 border border-green-200 rounded-lg p-3 mb-6">
                    <div class="flex items-center gap-2 text-green-700 text-sm">
                        <i class="fas fa-check-circle"></i>
                        <span>Stok tersisa 50+ barang</span>
                    </div>
                </div>
            </div>
            
            <!-- Variant Actions -->
            <div class="border-t p-4 bg-white">
                <div class="flex items-center justify-between mb-3">
                    <span class="text-sm text-gray-600">Subtotal</span>
                    <span class="text-lg font-bold text-red-500" id="variantSubtotal">Rp1.915.376</span>
                </div>
                
                <!-- Action Buttons -->
                <div class="flex gap-3">
                    <button onclick="addToCart()" class="flex-1 bg-white border border-green-600 text-green-600 py-3 rounded-lg font-medium">
                        <i class="fas fa-shopping-cart mr-2"></i>
                        Masukkan Keranjang
                    </button>
                    <button onclick="buyNow()" class="flex-1 tokopedia-green text-white py-3 rounded-lg font-medium">
                        Beli Sekarang
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bottom Action Bar -->
    <div class="fixed bottom-0 left-0 right-0 bg-white border-t">
        <!-- Extra Protection -->
        <div class="flex items-center justify-between px-4 py-2 bg-blue-50">
            <div class="flex items-center gap-2">
                <i class="fas fa-shield-alt text-blue-600"></i>
                <span class="text-xs text-blue-800">Extra Protection 90 Hari</span>
            </div>
            <button class="text-blue-600 text-xs">
                <i class="fas fa-info-circle"></i>
            </button>
        </div>
        
        <!-- Action Buttons -->
        <div class="p-4 flex gap-3">
            <button onclick="openVariantSheet('cart')" class="flex-1 bg-white border border-green-600 text-green-600 py-3 rounded-lg font-medium">
                <i class="fas fa-shopping-cart mr-2"></i>
                Masukkan Keranjang
            </button>
            <button onclick="openVariantSheet('buy')" class="flex-1 tokopedia-green text-white py-3 rounded-lg font-medium">
                Beli Sekarang
            </button>
        </div>
        
        <!-- Report Button -->
        <div class="px-4 pb-2 text-center">
            <button class="text-gray-500 text-xs">
                <i class="fas fa-flag mr-1"></i>
                Laporkan
            </button>
        </div>
    </div>

    <script>
        // Product data
        const productData = [
            {
                "item_group_id": "rf5mhz_2025",
                "variant": "3 Polar",
                "product_name": "3-in-1 facial radio frequency skin lifting machine - 3 Polar",
                "image_link": "https://m.media-amazon.com/images/I/61T7IBsVLmL._AC_SL1500_.jpg",
                "additional_image_link": "https://m.media-amazon.com/images/I/61T7IBsVLmL._AC_SL1500_.jpg, https://m.media-amazon.com/images/I/71oGa8IDcKL._AC_SL1500_.jpg, https://m.media-amazon.com/images/I/716pnSGRIML._AC_SL1500_.jpg, https://m.media-amazon.com/images/I/614P9qCKGrL._AC_SL1500_.jpg, https://m.media-amazon.com/images/I/61P5Kg5XhnL._AC_SL1500_.jpg, https://m.media-amazon.com/images/I/61w4K4EneHL._AC_SL1500_.jpg, https://m.media-amazon.com/images/I/61I9kobouRL._AC_SL1500_.jpg, https://m.media-amazon.com/images/I/61-oqTr76jL._AC_SL1500_.jpg",
                "sale_price": "1.915.376",
                "discount": "60%",
                "price": "3.192.294",
                "description": "Versi 3 Polar cocok untuk area wajah kecil seperti pipi, dagu, dan bawah mata. Menghasilkan panas lembut untuk merangsang produksi kolagen alami, mengencangkan kulit, serta mengurangi garis halus.",
                "video": "https://down-zl-sg.vod.susercontent.com/api/v4/11110107/mms/sg_02ab6747-87d5-4164-88d3-252f82e02efd_000050.16000081705298959.mp4"
            },
            {
                "item_group_id": "rf5mhz_2025",
                "variant": "6 Polar",
                "product_name": "3-in-1 facial radio frequency skin lifting machine - 6 Polar",
                "image_link": "https://m.media-amazon.com/images/I/71oGa8IDcKL._AC_SL1500_.jpg",
                "additional_image_link": "https://m.media-amazon.com/images/I/71oGa8IDcKL._AC_SL1500_.jpg, https://m.media-amazon.com/images/I/61T7IBsVLmL._AC_SL1500_.jpg, https://m.media-amazon.com/images/I/61P5Kg5XhnL._AC_SL1500_.jpg, https://m.media-amazon.com/images/I/61w4K4EneHL._AC_SL1500_.jpg, https://m.media-amazon.com/images/I/614P9qCKGrL._AC_SL1500_.jpg",
                "sale_price": "2.125.000",
                "discount": "55%",
                "price": "3.700.000",
                "description": "Versi 6 Polar memiliki jangkauan lebih luas untuk area pipi, leher, dan dahi. Didesain untuk hasil lifting yang lebih cepat dan efisien, memperbaiki elastisitas kulit dan mempertegas kontur wajah.",
                "video": "https://down-zl-sg.vod.susercontent.com/api/v4/11110107/mms/sg_02ab6747-87d5-4164-88d3-252f82e02efd_000050.16000081705298959.mp4"
            }
        ];

        // Current variant
        let currentVariant = "3 Polar";
        let currentQuantity = 1;
        let currentImageIndex = 0;

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            updateProductDisplay();
            loadThumbnails();
            loadCartFromStorage();
            updateCartBadge();
        });

        // Update product display based on selected variant
        function updateProductDisplay() {
            const product = productData.find(p => p.variant === currentVariant);
            
            if (product) {
                // Update main product info
                document.getElementById('productName').textContent = product.product_name;
                document.getElementById('salePrice').textContent = `Rp${product.sale_price}`;
                document.getElementById('originalPrice').textContent = `Rp${product.price}`;
                document.getElementById('discount').textContent = `${product.discount}%`;
                document.getElementById('productDescription').textContent = product.description;
                
                // Update main image
                document.getElementById('mainImage').src = product.image_link;
                document.getElementById('productVideo').poster = product.image_link;
                
                // Update variant sheet info
                document.getElementById('variantImage').src = product.image_link;
                document.getElementById('variantName').textContent = product.product_name;
                document.getElementById('variantPrice').textContent = `Rp${product.sale_price}`;
                document.getElementById('variantOriginalPrice').textContent = `Rp${product.price}`;
                document.getElementById('variantDiscount').textContent = `${product.discount}%`;
                
                // Update variant subtotal
                updateVariantSubtotal();
                
                // Update thumbnails
                loadThumbnails();
            }
        }

        // Load thumbnails based on current variant
        function loadThumbnails() {
            const product = productData.find(p => p.variant === currentVariant);
            const thumbnailGallery = document.getElementById('thumbnailGallery');
            
            if (product) {
                const images = product.additional_image_link.split(', ');
                thumbnailGallery.innerHTML = '';
                
                images.forEach((image, index) => {
                    const img = document.createElement('img');
                    img.src = image;
                    img.alt = `Product Image ${index + 1}`;
                    img.className = `w-20 h-20 object-cover rounded border ${index === 0 ? 'border-2 border-green-500' : 'border'}`;
                    img.onclick = () => selectImage(index);
                    thumbnailGallery.appendChild(img);
                });
                
                // Update image counter
                document.getElementById('imageCounter').textContent = '1';
                currentImageIndex = 0;
            }
        }

        // Select image from thumbnail
        function selectImage(index) {
            const product = productData.find(p => p.variant === currentVariant);
            if (product) {
                const images = product.additional_image_link.split(', ');
                document.getElementById('mainImage').src = images[index];
                document.getElementById('imageCounter').textContent = index + 1;
                currentImageIndex = index;
                
                // Update thumbnail selection
                const thumbnails = document.querySelectorAll('#thumbnailGallery img');
                thumbnails.forEach((thumb, i) => {
                    if (i === index) {
                        thumb.className = 'w-20 h-20 object-cover rounded border-2 border-green-500';
                    } else {
                        thumb.className = 'w-20 h-20 object-cover rounded border';
                    }
                });
            }
        }

        // Select variant
        function selectVariant(button, variant) {
            // Update selected state
            const parent = button.parentElement;
            parent.querySelectorAll('.variant-option').forEach(btn => {
                btn.classList.remove('selected');
            });
            button.classList.add('selected');
            
            // Update current variant
            currentVariant = variant;
            
            // Update display
            updateProductDisplay();
        }

        // Update quantity
        function updateQuantity(change) {
            const quantityElement = document.getElementById('quantity');
            let quantity = parseInt(quantityElement.textContent);
            quantity = Math.max(1, quantity + change);
            quantityElement.textContent = quantity;
            currentQuantity = quantity;
        }

        // Update variant quantity
        function updateVariantQuantity(change) {
            const quantityElement = document.getElementById('variantQuantity');
            let quantity = parseInt(quantityElement.textContent);
            quantity = Math.max(1, quantity + change);
            quantityElement.textContent = quantity;
            currentQuantity = quantity;
            updateVariantSubtotal();
        }

        // Update variant subtotal
        function updateVariantSubtotal() {
            const product = productData.find(p => p.variant === currentVariant);
            if (product) {
                const subtotal = parseInt(product.sale_price.replace(/\./g, '')) * currentQuantity;
                document.getElementById('variantSubtotal').textContent = `Rp${subtotal.toLocaleString('id-ID')}`;
            }
        }

        // Toggle cart
        function toggleCart() {
            const cartSection = document.getElementById('cartSection');
            cartSection.classList.toggle('hidden');
            if (!cartSection.classList.contains('hidden')) {
                renderCartItems();
                updateCartSummary();
            }
        }

        // Open variant sheet
        function openVariantSheet(action) {
            const variantSheet = document.getElementById('variantSheet');
            variantSheet.classList.remove('hidden');
            setTimeout(() => {
                variantSheet.querySelector('.variant-sheet').classList.add('show');
            }, 10);
        }

        // Close variant sheet
        function closeVariantSheet() {
            const variantSheet = document.getElementById('variantSheet');
            variantSheet.querySelector('.variant-sheet').classList.remove('show');
            setTimeout(() => {
                variantSheet.classList.add('hidden');
            }, 300);
        }

        // Show notification
        function showNotification() {
            const notification = document.getElementById('notification');
            notification.classList.add('show');
            
            // Hide notification after 3 seconds
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Add to cart
        function addToCart() {
            const product = productData.find(p => p.variant === currentVariant);
            
            if (product) {
                // Get cart from localStorage
                let cart = JSON.parse(localStorage.getItem('cart')) || [];
                
                // Check if product already in cart
                const existingItemIndex = cart.findIndex(item => 
                    item.variant === currentVariant
                );
                
                if (existingItemIndex !== -1) {
                    // Update quantity if already exists
                    cart[existingItemIndex].quantity += currentQuantity;
                } else {
                    // Add new item to cart
                    cart.push({
                        id: Date.now(), // Simple unique ID
                        item_group_id: product.item_group_id,
                        variant: currentVariant,
                        product_name: product.product_name,
                        image_link: product.image_link,
                        sale_price: product.sale_price,
                        original_price: product.price,
                        discount: product.discount,
                        quantity: currentQuantity
                    });
                }
                
                // Save cart to localStorage
                localStorage.setItem('cart', JSON.stringify(cart));
                
                // Update cart badge
                updateCartBadge();
                
                // Show notification
                showNotification();
                
                // Close variant sheet
                closeVariantSheet();
                
                // Open cart after a short delay
                setTimeout(() => {
                    toggleCart();
                }, 500);
            }
        }

        // Load cart from localStorage
        function loadCartFromStorage() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            return cart;
        }

        // Update cart badge
        function updateCartBadge() {
            const cart = loadCartFromStorage();
            const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
            document.getElementById('cartBadge').textContent = totalItems;
        }

        // Render cart items
        function renderCartItems() {
            const cart = loadCartFromStorage();
            const container = document.getElementById('cartItemsContainer');
            
            if (cart.length === 0) {
                container.innerHTML = `
                    <div class="p-8 text-center">
                        <i class="fas fa-shopping-cart text-gray-300 text-4xl mb-3"></i>
                        <p class="text-gray-500">Keranjang belanja Anda kosong</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '';
            
            cart.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'p-4 border-b';
                itemElement.innerHTML = `
                    <div class="flex gap-3">
                        <img src="${item.image_link}" alt="${item.product_name}" class="w-20 h-20 object-cover rounded">
                        <div class="flex-1">
                            <div class="text-sm font-medium mb-1">${item.product_name}</div>
                            <div class="text-xs text-gray-600 mb-2">${item.variant}</div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-2">
                                    <button class="w-6 h-6 rounded-full border flex items-center justify-center" onclick="updateCartItemQuantity(${item.id}, -1)">
                                        <i class="fas fa-minus text-xs"></i>
                                    </button>
                                    <span class="text-sm">${item.quantity}</span>
                                    <button class="w-6 h-6 rounded-full border flex items-center justify-center" onclick="updateCartItemQuantity(${item.id}, 1)">
                                        <i class="fas fa-plus text-xs"></i>
                                    </button>
                                </div>
                                <div class="text-red-500 font-semibold">Rp${parseInt(item.sale_price.replace(/\./g, '')) * item.quantity}</div>
                            </div>
                        </div>
                        <button class="text-gray-400" onclick="removeCartItem(${item.id})">
                            <i class="fas fa-trash text-sm"></i>
                        </button>
                    </div>
                `;
                container.appendChild(itemElement);
            });
        }

        // Update cart item quantity
        function updateCartItemQuantity(itemId, change) {
            let cart = loadCartFromStorage();
            const itemIndex = cart.findIndex(item => item.id === itemId);
            
            if (itemIndex !== -1) {
                cart[itemIndex].quantity = Math.max(1, cart[itemIndex].quantity + change);
                localStorage.setItem('cart', JSON.stringify(cart));
                
                // Re-render cart
                renderCartItems();
                updateCartSummary();
                updateCartBadge();
            }
        }

        // Remove cart item
        function removeCartItem(itemId) {
            let cart = loadCartFromStorage();
            cart = cart.filter(item => item.id !== itemId);
            localStorage.setItem('cart', JSON.stringify(cart));
            
            // Re-render cart
            renderCartItems();
            updateCartSummary();
            updateCartBadge();
        }

        // Clear cart
        function clearCart() {
            if (confirm('Apakah Anda yakin ingin menghapus semua item dari keranjang?')) {
                localStorage.removeItem('cart');
                
                // Re-render cart
                renderCartItems();
                updateCartSummary();
                updateCartBadge();
            }
        }

        // Update cart summary
        function updateCartSummary() {
            const cart = loadCartFromStorage();
            
            // Calculate totals
            const subtotal = cart.reduce((total, item) => {
                return total + (parseInt(item.sale_price.replace(/\./g, '')) * item.quantity);
            }, 0);
            
            const discount = Math.floor(subtotal * 0.1); // 10% discount
            const total = subtotal - discount;
            
            // Update UI
            document.getElementById('cartItemCount').textContent = cart.reduce((total, item) => total + item.quantity, 0);
            document.getElementById('cartSubtotal').textContent = `Rp${subtotal.toLocaleString('id-ID')}`;
            document.getElementById('cartDiscount').textContent = `-Rp${discount.toLocaleString('id-ID')}`;
            document.getElementById('cartTotal').textContent = `Rp${total.toLocaleString('id-ID')}`;
            document.getElementById('checkoutItemCount').textContent = cart.length;
        }

        // Buy now
        function buyNow() {
            // Add to cart first
            addToCart();
            
            // Then go to checkout after cart is opened
            setTimeout(() => {
                checkout();
            }, 1500);
        }

        // Checkout
        function checkout() {
            const cart = loadCartFromStorage();
            
            if (cart.length === 0) {
                alert('Keranjang belanja Anda kosong!');
                return;
            }
            
            // Redirect to checkout page
            window.location.href = './checkout';
        }

        // Show discussion form
        function showDiscussionForm() {
            document.getElementById('discussionForm').classList.remove('hidden');
        }

        // Hide discussion form
        function hideDiscussionForm() {
            document.getElementById('discussionForm').classList.add('hidden');
        }

        // Submit discussion
        function submitDiscussion() {
            // Get discussion text
            const discussionText = document.querySelector('#discussionForm textarea').value;
            if (discussionText.trim() === '') {
                alert('Pertanyaan tidak boleh kosong!');
                return;
            }
            
            // Show success message
            alert('Pertanyaan berhasil dikirim!');
            hideDiscussionForm();
            document.querySelector('#discussionForm textarea').value = '';
        }
    </script>
</body>
</html>

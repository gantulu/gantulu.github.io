<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Lacak Outlet Karanganyar</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
    }
    h1 {
      text-align: center;
      background-color: #4CAF50;
      color: white;
      padding: 1rem;
    }
    #controls {
      padding: 1rem;
      text-align: center;
    }
    #map {
      height: 500px;
    }
  </style>
</head>
<body>

<h1>Lacak Outlet Karanganyar</h1>

<div id="controls">
  <label for="kategori">Filter Kategori: </label>
  <select id="kategori" onchange="filterOutlets()">
    <option value="all">Semua</option>
    <option value="kurir">Kurir</option>
    <option value="cargo">Cargo</option>
    <option value="oleh-oleh">Oleh-oleh</option>
  </select>
</div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
  // Inisialisasi peta ke Karanganyar
  const map = L.map('map').setView([-7.5965, 110.9504], 12); // Koordinat Karanganyar

  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors'
  }).addTo(map);

  // Data Outlet
  const outlets = [
    {
      kategori: "kurir",
      nama: "J&T Express Papahan",
      alamat: "Jl. Raya Soloâ€‘Tawangmangu, Papahan, Karanganyar",
      jam: "08.00 - 17.00",
      telepon: "0858-0234-6785",
      lat: -7.6065,
      lng: 110.9508
    },
    {
      kategori: "cargo",
      nama: "Indah Cargo Gondangrejo",
      alamat: "Gondangrejo, Karanganyar",
      jam: "08.00 - 16.00",
      telepon: "0857-1234-5678",
      lat: -7.5785,
      lng: 110.8870
    },
    {
      kategori: "oleh-oleh",
      nama: "Pasar Wisata Tawangmangu",
      alamat: "Jl. Raya Tawangmangu No.16",
      jam: "07.00 - 18.00",
      telepon: "-",
      lat: -7.6541,
      lng: 111.1290
    },
    {
      kategori: "kurir",
      nama: "Wahana Express Palur",
      alamat: "Jl. Raya Palur, Jaten",
      jam: "08.00 - 17.00",
      telepon: "0812-3456-7890",
      lat: -7.5882,
      lng: 110.9260
    }
  ];

  let markers = [];

  function tampilkanOutlets(data) {
    // Hapus marker lama
    markers.forEach(marker => map.removeLayer(marker));
    markers = [];

    // Tambahkan marker baru
    data.forEach(outlet => {
      const marker = L.marker([outlet.lat, outlet.lng]).addTo(map);
      marker.bindPopup(`
        <strong>${outlet.nama}</strong><br>
        ${outlet.alamat}<br>
        Jam: ${outlet.jam}<br>
        Telp: ${outlet.telepon}<br>
        <a href="https://www.google.com/maps/dir/?api=1&destination=${outlet.lat},${outlet.lng}" target="_blank">Arahkan di Google Maps</a>
      `);
      markers.push(marker);
    });
  }

  // Fungsi filter
  function filterOutlets() {
    const kategori = document.getElementById('kategori').value;
    if (kategori === "all") {
      tampilkanOutlets(outlets);
    } else {
      const filtered = outlets.filter(o => o.kategori === kategori);
      tampilkanOutlets(filtered);
    }
  }

  // Tampilkan semua outlet saat awal
  tampilkanOutlets(outlets);
</script>

</body>
</html>
